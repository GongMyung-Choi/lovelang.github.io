<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>ë£¨ì›¨ì¸ DNS Â· HTTPS ê´€ë¦¬ì</title>
<style>
body {
  font-family: 'Pretendard', sans-serif;
  text-align: center;
  padding: 40px;
  background: #f9f9ff;
  color: #333;
}
h1 { color: #5c308a; margin-bottom: 0.3em; }
section {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 0 8px rgba(0,0,0,0.1);
  width: 90%;
  max-width: 800px;
  margin: 20px auto;
}
button {
  padding: 10px 18px;
  margin: 8px;
  border: none;
  border-radius: 8px;
  background: #5c308a;
  color: #fff;
  cursor: pointer;
}
button:hover { background: #6e3cb3; }
.ok { color: #2b8a3e; font-weight: bold; }
.fail { color: #c92a2a; font-weight: bold; }
pre {
  background: #f0f0f0;
  padding: 8px;
  border-radius: 6px;
  text-align: left;
  overflow-x: auto;
}
</style>
</head>
<body>

<h1>ğŸŒ ë£¨ì›¨ì¸ DNS & HTTPS ê´€ë¦¬ì</h1>
<p>DNS ì—°ê²°, GitHub Pages CNAME, HTTPS ì¸ì¦ ìƒíƒœë¥¼ ìë™ìœ¼ë¡œ ì ê²€í•©ë‹ˆë‹¤.</p>

<section>
  <h3>ğŸ” DNS ìƒíƒœ ì ê²€</h3>
  <button onclick="checkDNS()">Aë ˆì½”ë“œ í™•ì¸</button>
  <div id="dns-result"></div>
</section>

<section>
  <h3>ğŸ“œ CNAME íŒŒì¼ í™•ì¸</h3>
  <button onclick="checkCNAME()">CNAME ì½ê¸°</button>
  <div id="cname-result"></div>
</section>

<section>
  <h3>ğŸ” HTTPS ì¸ì¦ ìƒíƒœ</h3>
  <button onclick="checkHTTPS()">HTTPS í™•ì¸</button>
  <div id="https-result"></div>
</section>

<script>
async function checkDNS(){
  const box=document.getElementById('dns-result');
  box.innerHTML='â³ í™•ì¸ ì¤‘...';
  const domain=location.hostname;
  const res=await fetch(`https://dns.google/resolve?name=${domain}&type=A`);
  const data=await res.json();
  if(!data.Answer){ box.innerHTML='<p class="fail">âŒ Aë ˆì½”ë“œ ì—†ìŒ</p>'; return; }
  const ips=data.Answer.map(a=>a.data);
  const github=['185.199.108.153','185.199.109.153','185.199.110.153','185.199.111.153'];
  const match=ips.filter(ip=>github.includes(ip));
  if(match.length>0)
    box.innerHTML=`<p class="ok">âœ… GitHub Pages ì—°ê²°ë¨ (${match.join(', ')})</p><pre>${JSON.stringify(data.Answer,null,2)}</pre>`;
  else
    box.innerHTML=`<p class="fail">âš ï¸ GitHub IPì™€ ë¶ˆì¼ì¹˜</p><pre>${JSON.stringify(data.Answer,null,2)}</pre>`;
}

async function checkCNAME(){
  const box=document.getElementById('cname-result');
  box.innerHTML='â³ í™•ì¸ ì¤‘...';
  try{
    const res=await fetch('/CNAME');
    if(!res.ok) throw new Error('CNAME íŒŒì¼ ì—†ìŒ');
    const text=await res.text();
    box.innerHTML=`<p class="ok">âœ… CNAME íŒŒì¼ ê°ì§€ë¨</p><pre>${text}</pre>`;
  }catch(e){
    box.innerHTML=`<p class="fail">âŒ ${e.message}</p>`;
  }
}

async function checkHTTPS(){
  const box=document.getElementById('https-result');
  box.innerHTML='â³ í™•ì¸ ì¤‘...';
  const url=location.href.replace(/^http:/,'https:');
  try{
    const res=await fetch(url);
    if(res.ok) box.innerHTML='<p class="ok">âœ… HTTPS ì—°ê²° ì •ìƒ</p>';
    else box.innerHTML='<p class="fail">âš ï¸ HTTPS ì‘ë‹µ ë¶ˆëŸ‰</p>';
  }catch(e){
    box.innerHTML=`<p class="fail">âŒ HTTPS ì ‘ê·¼ ì‹¤íŒ¨ (${e.message})</p>`;
  }
}
</script>
</body>
</html>
