<!DOCTYPE html><html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ìš¸ë¦¼ì˜ ì–¸ì–´ Â· ë†€ì´í„°</title>
<style>
:root{
  --bg:#ffffff; --fg:#111111; --muted:#555; --line:#e6e6e9;
  --accent:#2a9d8f; --accent-2:#af2465; --tile:#ffffff; --tile-hov:#f7f7fb;
  --radius:16px; --gap:14px; --fs:1rem; --lh:1.7;
  --focus:#005fcc;
}
*{box-sizing:border-box}
html:focus-within{scroll-behavior:smooth}
body{margin:0;font-family:system-ui,-apple-system,"Noto Sans KR","Apple SD Gothic Neo",sans-serif;
     background:var(--bg);color:var(--fg);line-height:var(--lh);font-size:var(--fs)}
a{color:inherit}
.wrap{max-width:1100px;margin:0 auto;padding:20px}
.skip{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip:focus{left:16px;top:12px;width:auto;height:auto;background:#fff;border:2px solid var(--focus);
           padding:.4rem .6rem;border-radius:10px;z-index:10000}

/* ìƒë‹¨ */
header{display:flex;flex-wrap:wrap;align-items:center;gap:10px;margin:6px 0 12px}
h1{margin:0;font-size:1.9rem}
.badge{border:1px solid var(--line);border-radius:999px;padding:.2rem .6rem;background:#fafafa;color:#444;font-size:.85rem}
.toolbar{margin-left:auto;display:flex;flex-wrap:wrap;gap:8px}
.toolbar button,.toolbar label{border:1px solid var(--line);background:#fff;border-radius:10px;padding:.45rem .7rem;cursor:pointer}
.toolbar input[type="checkbox"]{margin-right:.4rem;transform:scale(1.2)}

/* ì•ˆë‚´ */
.note{border:1px dashed var(--line);border-radius:12px;padding:10px 12px;color:#444;background:#fff}

/* ê·¸ë¦¬ë“œ */
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--gap);margin-top:14px}
@media(max-width:900px){.grid{grid-template-columns:1fr}}
.card{background:var(--tile);border:1px solid var(--line);border-radius:var(--radius);padding:14px}
.card:focus-within{outline:2px solid var(--focus);outline-offset:2px}
.card h2{margin:.1rem 0 .4rem;font-size:1.2rem;color:var(--accent-2)}
.card p{margin:.2rem 0 .6rem;color:var(--muted)}
.row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
.btn{border:2px solid var(--accent);background:#fff;color:var(--accent);padding:.6rem 1rem;border-radius:12px;cursor:pointer}
.btn:hover{background:#e8fbf6}
.btn.secondary{border-color:var(--accent-2);color:var(--accent-2)}
.btn.ghost{border:1px solid var(--line);color:#333}
.kbd{border:1px solid var(--line);background:#fafafa;border-radius:6px;padding:.05rem .35rem}

/* í˜¸í¡ í˜ì´ì„œ */
.pacerWrap{display:flex;align-items:center;gap:14px}
.pacer{width:120px;height:120px;border-radius:50%;border:6px solid var(--accent);display:flex;align-items:center;justify-content:center}
.pacer span{font-weight:700}
.progress{height:10px;background:#f3f3f5;border-radius:999px;overflow:hidden}
.progress>div{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#56cc9d)}
@media (prefers-reduced-motion:no-preference){
  .breath-anim{animation:breath 6s ease-in-out infinite}
  @keyframes breath{
    0%{transform:scale(0.9)}
    50%{transform:scale(1.05)}
    100%{transform:scale(0.9)}
  }
}

/* ë°˜ì‘ ê²Œì„ */
.bigbtn{display:block;width:100%;padding:26px;border-radius:14px;border:2px dashed var(--accent-2);text-align:center;font-size:1.2rem;cursor:pointer}
.bigbtn.ready{background:#fff4f7}
.bigbtn.go{background:#e8fbf6;border-color:var(--accent)}
.stat{color:#444;margin-top:6px}

/* ê°ì • ë³´ë“œ */
.moods{display:flex;flex-wrap:wrap;gap:8px}
.mood{font-size:1.6rem;line-height:1;border:1px solid var(--line);border-radius:999px;padding:.45rem .65rem;cursor:pointer;background:#fff}
.mood[aria-pressed="true"]{outline:2px solid var(--accent);background:#e8fbf6}
textarea{width:100%;min-height:90px;border:1px solid var(--line);border-radius:12px;padding:10px}

/* ë‚™ì„œì¥ */
canvas{width:100%;height:260px;border:1px solid var(--line);border-radius:12px;background:#fff;touch-action:none}

/* ê³ ëŒ€ë¹„ ëª¨ë“œ / í°ê¸€ */
.high-contrast{--bg:#000;--fg:#fff;--muted:#d0d0d0;--line:#555;--tile:#111;--tile-hov:#151515;--focus:#ffd400}
.large-text{--fs:1.15rem}

/* í¬ì»¤ìŠ¤ */
:focus{outline:2px solid var(--focus);outline-offset:2px}
</style>
</head>
<body>
<a href="#main" class="skip">ë³¸ë¬¸ìœ¼ë¡œ ê±´ë„ˆë›°ê¸°</a>
<div class="wrap">
  <header>
    <h1>ë†€ì´í„°</h1>
    <span class="badge" aria-hidden="true">ì‰¬ìš´ ì¡°ì‘ Â· í° ë²„íŠ¼ Â· í‚¤ë³´ë“œ ì§€ì›</span>
    <div class="toolbar" role="group" aria-label="ì ‘ê·¼ì„± ì„¤ì •">
      <label><input type="checkbox" id="hc"> ë†’ì€ ëŒ€ë¹„</label>
      <label><input type="checkbox" id="lg"> í° ê¸€ì</label>
      <label><input type="checkbox" id="rm"> ëª¨ì…˜ ì¤„ì´ê¸°</label>
    </div>
  </header>

  <p class="note">
    <strong>ì¡°ì‘:</strong> íƒ­/í™”ì‚´í‘œë¡œ ì´ë™, <span class="kbd">Space</span>/<span class="kbd">Enter</span>ë¡œ ì‹¤í–‰.
    ì €ì¥ì€ ì´ ë¸Œë¼ìš°ì €ì—ë§Œ ë‚¨ìŠµë‹ˆë‹¤.
  </p>

  <main id="main" class="grid">
    <!-- 1. í˜¸í¡ í˜ì´ì„œ -->
    <section class="card" aria-labelledby="c1">
      <h2 id="c1">í˜¸í¡ í˜ì´ì„œ</h2>
      <p>4ì´ˆ ë“¤ìˆ¨ Â· 4ì´ˆ ë©ˆì¶¤ Â· 6ì´ˆ ë‚ ìˆ¨. ë²„íŠ¼ì„ ëˆŒëŸ¬ í•¨ê»˜ í˜¸í¡í•©ë‹ˆë‹¤.</p>
      <div class="pacerWrap">
        <div id="pacer" class="pacer breath-anim" aria-live="polite"><span>ëŒ€ê¸°</span></div>
        <div style="flex:1">
          <div class="row">
            <button id="startBreath" class="btn">ì‹œì‘</button>
            <button id="stopBreath" class="btn ghost">ì •ì§€</button>
          </div>
          <div class="progress" style="margin-top:8px" aria-hidden="true"><div id="bar"></div></div>
        </div>
      </div>
    </section>

    <!-- 2. ë°˜ì‘ ê²Œì„ -->
    <section class="card" aria-labelledby="c2">
      <h2 id="c2">ë°˜ì‘ ê²Œì„</h2>
      <p>â€œì¤€ë¹„â€ í›„ ì´ˆë¡ìƒ‰ìœ¼ë¡œ ë°”ë€Œë©´ ë°”ë¡œ ëˆŒëŸ¬ìš”. í‰ê·  ë°˜ì‘ ì†ë„ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>
      <button id="reactBtn" class="bigbtn ready" aria-live="polite">ì¤€ë¹„ (ëˆ„ë¥´ì§€ ë§ˆì„¸ìš”)</button>
      <div class="row">
        <button id="reactStart" class="btn secondary">ì‹œì‘</button>
        <button id="reactReset" class="btn ghost">ì´ˆê¸°í™”</button>
      </div>
      <div class="stat" id="reactStat">ê¸°ë¡ ì—†ìŒ</div>
    </section>

    <!-- 3. ê°ì • ë³´ë“œ -->
    <section class="card" aria-labelledby="c3">
      <h2 id="c3">ê°ì • ë³´ë“œ</h2>
      <p>ì˜¤ëŠ˜ ê°ì •ì„ ê³ ë¥´ê³  í•œ ì¤„ ë‚¨ê²¨ìš”.</p>
      <div class="moods" role="group" aria-label="ê°ì • ì„ íƒ">
        <button class="mood" data-val="ğŸ˜Š" aria-pressed="false">ğŸ˜Š</button>
        <button class="mood" data-val="ğŸ˜Œ" aria-pressed="false">ğŸ˜Œ</button>
        <button class="mood" data-val="ğŸ˜¢" aria-pressed="false">ğŸ˜¢</button>
        <button class="mood" data-val="ğŸ˜ " aria-pressed="false">ğŸ˜ </button>
        <button class="mood" data-val="ğŸ˜´" aria-pressed="false">ğŸ˜´</button>
        <button class="mood" data-val="ğŸ¤—" aria-pressed="false">ğŸ¤—</button>
      </div>
      <div class="row" style="margin-top:8px">
        <textarea id="moodText" placeholder="í•œ ì¤„ ê¸°ë¡"></textarea>
      </div>
      <div class="row">
        <button id="moodSave" class="btn">ì €ì¥</button>
        <button id="moodClear" class="btn ghost">ì§€ìš°ê¸°</button>
      </div>
      <div class="stat" id="moodStat">ì €ì¥ëœ ê¸°ë¡ ì—†ìŒ</div>
    </section>

    <!-- 4. ë‚™ì„œì¥ -->
    <section class="card" aria-labelledby="c4">
      <h2 id="c4">ë‚™ì„œì¥</h2>
      <p>êµµê²Œ ê·¸ë ¤ì§€ëŠ” ê°„ë‹¨í•œ ìº”ë²„ìŠ¤. ë§ˆìš°ìŠ¤/í„°ì¹˜ ëª¨ë‘ ê°€ëŠ¥.</p>
      <canvas id="board" width="800" height="260" aria-label="ë‚™ì„œ ìº”ë²„ìŠ¤"></canvas>
      <div class="row" style="margin-top:8px">
        <button id="pen" class="btn">íœ</button>
        <button id="eraser" class="btn secondary">ì§€ìš°ê°œ</button>
        <button id="clearCanvas" class="btn ghost">ì „ì²´ ì§€ìš°ê¸°</button>
      </div>
    </section>
  </main>
</div>

<script>
/* ê³µí†µ: ì„¤ì • ì €ì¥/ì ìš© */
const $=s=>document.querySelector(s);
const LS={g:'playground_settings', mood:'playground_mood', react:'playground_react'};
const state = JSON.parse(localStorage.getItem(LS.g) || '{}');
function applyA11y(){
  document.body.classList.toggle('high-contrast', !!state.hc);
  document.body.classList.toggle('large-text', !!state.lg);
  if(state.rm){ document.documentElement.style.setProperty('scroll-behavior','auto'); }
}
function saveA11y(){ localStorage.setItem(LS.g, JSON.stringify(state)); }
$('#hc').checked = !!state.hc; $('#lg').checked = !!state.lg; $('#rm').checked = !!state.rm;
['hc','lg','rm'].forEach(id=>{
  $('#'+id).addEventListener('change',e=>{ state[id]=e.target.checked; applyA11y(); saveA11y(); });
});
applyA11y();

/* 1) í˜¸í¡ í˜ì´ì„œ */
let breathTimer=null, barTimer=null;
function breathStep(el, txt, ms){ return new Promise(r=>{ el.textContent = txt; setTimeout(r, ms); }); }
function setBar(p){ $('#bar').style.width = Math.max(0, Math.min(100,p)) + '%'; }
async function runBreath(){
  if(breathTimer){return;}
  const S=$('#pacer').querySelector('span');
  const reduced = $('#rm').checked || window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if(reduced){ $('#pacer').classList.remove('breath-anim'); } else { $('#pacer').classList.add('breath-anim'); }
  let running=true; breathTimer = true;
  // ì§„í–‰ ë°” ë¶€ë“œëŸ½ê²Œ
  let t0=Date.now(); clearInterval(barTimer);
  barTimer = setInterval(()=>{ const dt=Date.now()-t0; const cyc=14000; setBar((dt%cyc)/cyc*100); }, 50);

  while(running && breathTimer){
    await breathStep(S,'ë“¤ì´ë§ˆì…”ìš” (4)', 1000);
    await breathStep(S,'ë“¤ì´ë§ˆì…”ìš” (3)', 1000);
    await breathStep(S,'ë“¤ì´ë§ˆì…”ìš” (2)', 1000);
    await breathStep(S,'ë“¤ì´ë§ˆì…”ìš” (1)', 1000);
    await breathStep(S,'ë©ˆì¶°ìš” (4)', 1000);
    await breathStep(S,'ë©ˆì¶°ìš” (3)', 1000);
    await breathStep(S,'ë©ˆì¶°ìš” (2)', 1000);
    await breathStep(S,'ë©ˆì¶°ìš” (1)', 1000);
    await breathStep(S,'ë‚´ì‰¬ì–´ìš” (6)', 1000);
    await breathStep(S,'ë‚´ì‰¬ì–´ìš” (5)', 1000);
    await breathStep(S,'ë‚´ì‰¬ì–´ìš” (4)', 1000);
    await breathStep(S,'ë‚´ì‰¬ì–´ìš” (3)', 1000);
    await breathStep(S,'ë‚´ì‰¬ì–´ìš” (2)', 1000);
    await breathStep(S,'ë‚´ì‰¬ì–´ìš” (1)', 1000);
  }
}
$('#startBreath').addEventListener('click', runBreath);
$('#stopBreath').addEventListener('click', ()=>{ breathTimer=null; clearInterval(barTimer); $('#pacer').querySelector('span').textContent='ëŒ€ê¸°'; setBar(0); });

/* 2) ë°˜ì‘ ê²Œì„ */
const react = JSON.parse(localStorage.getItem(LS.react)||'{"times":[]}');
function statReact(){
  const a=react.times||[]; if(a.length===0){ $('#reactStat').textContent='ê¸°ë¡ ì—†ìŒ'; return; }
  const avg = Math.round(a.reduce((x,y)=>x+y,0)/a.length);
  $('#reactStat').textContent = `ìµœê·¼ ${a.length}íšŒ í‰ê· : ${avg}ms`;
}
let waitT=null, allowTap=false;
$('#reactStart').addEventListener('click', ()=>{
  allowTap=false;
  $('#reactBtn').className='bigbtn ready';
  $('#reactBtn').textContent='ì¤€ë¹„ (ëˆ„ë¥´ì§€ ë§ˆì„¸ìš”)';
  clearTimeout(waitT);
  const delay = 800 + Math.random()*2200;
  waitT=setTimeout(()=>{
    $('#reactBtn').className='bigbtn go';
    $('#reactBtn').textContent='ì§€ê¸ˆ!';
    $('#reactBtn').dataset.t0 = Date.now();
    allowTap=true;
  }, delay);
});
$('#reactBtn').addEventListener('click', ()=>{
  if(!allowTap){ // ì„±ê¸‰í•¨
    $('#reactBtn').textContent='ì„±ê¸‰í–ˆì–´ìš”! ë‹¤ì‹œ ì‹œì‘';
    clearTimeout(waitT); allowTap=false; return;
  }
  const t0 = +($('#reactBtn').dataset.t0||Date.now());
  const dt = Date.now() - t0;
  react.times = (react.times||[]); react.times.unshift(dt); react.times=react.times.slice(0,20);
  localStorage.setItem(LS.react, JSON.stringify(react));
  $('#reactBtn').textContent = `ì¢‹ì•„ìš”! ${dt}ms`;
  allowTap=false; statReact();
});
$('#reactReset').addEventListener('click', ()=>{
  react.times=[]; localStorage.setItem(LS.react, JSON.stringify(react));
  $('#reactBtn').className='bigbtn ready'; $('#reactBtn').textContent='ì¤€ë¹„ (ëˆ„ë¥´ì§€ ë§ˆì„¸ìš”)'; statReact();
});
statReact();

/* 3) ê°ì • ë³´ë“œ */
const moodSaved = JSON.parse(localStorage.getItem(LS.mood)||'{}');
function renderMoodStat(){
  if(moodSaved.emoji || moodSaved.text){
    $('#moodStat').textContent = `ì˜¤ëŠ˜: ${moodSaved.emoji||'ğŸ™‚'} Â· "${(moodSaved.text||'').slice(0,40)}"`;
  }else{
    $('#moodStat').textContent = 'ì €ì¥ëœ ê¸°ë¡ ì—†ìŒ';
  }
}
document.querySelectorAll('.mood').forEach(b=>{
  b.addEventListener('click', ()=>{
    const v=b.dataset.val;
    document.querySelectorAll('.mood').forEach(x=>x.setAttribute('aria-pressed','false'));
    b.setAttribute('aria-pressed','true');
    moodSaved.emoji=v; renderMoodStat();
  });
});
$('#moodSave').addEventListener('click', ()=>{
  moodSaved.text = $('#moodText').value.trim();
  localStorage.setItem(LS.mood, JSON.stringify(moodSaved));
  renderMoodStat();
});
$('#moodClear').addEventListener('click', ()=>{
  localStorage.removeItem(LS.mood);
  document.querySelectorAll('.mood').forEach(x=>x.setAttribute('aria-pressed','false'));
  $('#moodText').value=''; renderMoodStat();
});
renderMoodStat();

/* 4) ë‚™ì„œì¥ (ë§ˆìš°ìŠ¤/í„°ì¹˜/í‚¤ë³´ë“œ ìµœì†Œ ì¡°ì‘) */
const cvs = document.getElementById('board');
const ctx = cvs.getContext('2d');
let drawing=false, erasing=false, last=null;
function pos(e){
  if(e.touches && e.touches[0]){
    const r=cvs.getBoundingClientRect(); return {x:e.touches[0].clientX-r.left, y:e.touches[0].clientY-r.top};
  }else{
    const r=cvs.getBoundingClientRect(); return {x:e.clientX-r.left, y:e.clientY-r.top};
  }
}
function draw(p){
  ctx.lineCap='round'; ctx.lineJoin='round';
  ctx.strokeStyle = erasing ? '#ffffff' : '#111111';
  ctx.lineWidth = erasing ? 26 : 10;
  if(!last){ last=p; }
  ctx.beginPath(); ctx.moveTo(last.x,last.y); ctx.lineTo(p.x,p.y); ctx.stroke();
  last=p;
}
function stopDraw(){ drawing=false; last=null; }
cvs.addEventListener('mousedown',e=>{drawing=true; last=pos(e)});
cvs.addEventListener('mousemove',e=>{ if(drawing) draw(pos(e)); });
window.addEventListener('mouseup',stopDraw);
cvs.addEventListener('touchstart',e=>{drawing=true; last=pos(e); e.preventDefault();},{passive:false});
cvs.addEventListener('touchmove',e=>{ if(drawing) draw(pos(e)); e.preventDefault();},{passive:false});
cvs.addEventListener('touchend',()=>{stopDraw()});
$('#pen').addEventListener('click',()=>{erasing=false});
$('#eraser').addEventListener('click',()=>{erasing=true});
$('#clearCanvas').addEventListener('click',()=>{ctx.clearRect(0,0,cvs.width,cvs.height)});

/* í‚¤ë³´ë“œ íŒíŠ¸: Spaceë¡œ í˜¸í¡ ì‹œì‘/ì •ì§€, Rë¡œ ë°˜ì‘ê²Œì„ ì‹œì‘ */
window.addEventListener('keydown',e=>{
  if(e.target.tagName==='TEXTAREA') return;
  if(e.code==='Space'){ e.preventDefault();
    if(breathTimer){ $('#stopBreath').click(); } else { $('#startBreath').click(); }
  }
  if(e.key.toLowerCase()==='r'){ $('#reactStart').click(); }
});
</script>
</body></html>
