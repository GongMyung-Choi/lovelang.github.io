<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ë£¨ì›¨ì¸ ì „ìë„ì„œê´€ | AIìš© ì¸ë±ìŠ¤</title>
<style>
body{font-family:'Noto Sans KR',sans-serif;background:#f5f5f5;margin:0;}
header{background:#1b3d36;color:#fff;padding:18px;text-align:center;font-size:1.5rem;font-weight:700;}
main{max-width:1100px;margin:0 auto;padding:24px;}
.section{margin-bottom:40px;}
.section h2{color:#1b3d36;border-left:6px solid #1b3d36;padding-left:10px;margin-bottom:12px;}
.subsection{margin:10px 0 20px 20px;}
.subsection h3{color:#3a655c;margin-bottom:8px;font-size:1.1rem;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:18px;}
.card{background:#fff;border-radius:12px;box-shadow:0 3px 6px rgba(0,0,0,0.12);padding:16px;}
.card h4{margin:0 0 6px;font-size:1.05rem;color:#2a9d8f;}
.badge{display:inline-block;background:#e4f4ee;color:#333;padding:4px 8px;border-radius:6px;font-size:0.8rem;margin:2px;}
footer{text-align:center;padding:16px;color:#666;font-size:0.9rem;}
</style>
<!-- header.html ì˜ </head> ë°”ë¡œ ìœ„ìª½ì— ì¶”ê°€ -->
<script src="https://unpkg.com/@supabase/supabase-js@2" defer></script>
<script type="module" src="/scripts/memory_policies.js" defer></script>

</head>
<body>
<header>ğŸ¤– ë£¨ì›¨ì¸ ì „ìë„ì„œê´€ (AIìš©)</header>
<main id="library"></main>
<footer>ë£¨ì›¨ì¸ AI Library Â© 2025</footer>

<script>
// 1ï¸âƒ£ ì±… ëª©ë¡ (ìë™ ìƒì„± ì˜ˆì •)
const books = [
  './papers/a_101/summary.txt',
  './papers/a_205/summary.txt',
  './papers/a_301/summary.txt',
  './papers/a_403/summary.txt',
  './papers/a_601/summary.txt'
];

// 2ï¸âƒ£ summary íŒŒì‹±
async function parseSummary(path){
  const res = await fetch(path);
  const text = await res.text();
  const title = (text.match(/Title:\s*(.*)/i)||[])[1]||'ì œëª© ë¯¸ìƒ';
  const category = (text.match(/Category:\s*(.*)/i)||[])[1]||'ë¯¸ë¶„ë¥˜';
  const tagsLine = (text.match(/Tags:\s*(.*)/i)||[])[1]||'';
  const summary = (text.match(/Summary:\s*([\s\S]*)/i)||[])[1]||'';
  const tags = tagsLine.split(/[#,]/).map(t=>t.trim()).filter(Boolean);

  // 3ï¸âƒ£ AI ì¤‘ë¶„ë¥˜ ìƒì„± (summary ê¸°ë°˜ ì˜ë¯¸ ë¶„ì„)
  const sub = [];
  const lower = summary.toLowerCase();
  if(/ì¡´ì¬|ì˜ë¯¸|ì² í•™|philosophy/.test(lower)) sub.push('ì² í•™ì  ì„±ê²©');
  if(/ì–¸ì–´|ì˜ì‚¬ì†Œí†µ|communication/.test(lower)) sub.push('ì–¸ì–´í•™ì  ì ‘ê·¼');
  if(/ê¸°ìˆ |ai|system|tech/.test(lower)) sub.push('ê¸°ìˆ Â·ì‹œìŠ¤í…œì  ì ‘ê·¼');
  if(/ì˜ˆìˆ |ê°ì„±|art|aesthetic/.test(lower)) sub.push('ì˜ˆìˆ Â·ê°ì„±ì  í‘œí˜„');
  if(/êµìœ¡|learning|êµìœ¡ì /.test(lower)) sub.push('êµìœ¡Â·ì¸ê°„í•™ì  ë¶„ì„');
  if(/ì¹˜ìœ |therapy|íšŒë³µ|healing/.test(lower)) sub.push('ì¹˜ìœ Â·íšŒë³µ ì¤‘ì‹¬');

  return { title, category, sub, tags, summary };
}

// 4ï¸âƒ£ ì¸ë±ìŠ¤ ìƒì„± (ëŒ€ë¶„ë¥˜ > ì¤‘ë¶„ë¥˜ > ì±…)
async function buildLibrary(){
  const container=document.getElementById('library');
  const items=await Promise.all(books.map(parseSummary));
  const grouped={};

  // 1ì°¨ ê·¸ë£¹: Category (ëŒ€ë¶„ë¥˜)
  items.forEach(({title,category,sub,tags,summary})=>{
    if(!grouped[category]) grouped[category]={};
    const subs=sub.length?sub:['ê¸°íƒ€'];
    subs.forEach(s=>{
      if(!grouped[category][s]) grouped[category][s]=[];
      grouped[category][s].push({title,tags,summary});
    });
  });

  // í™”ë©´ êµ¬ì„±
  for(const cat in grouped){
    const section=document.createElement('section');
    section.className='section';
    section.innerHTML=`<h2>${cat}</h2>`;
    for(const sub in grouped[cat]){
      const subDiv=document.createElement('div');
      subDiv.className='subsection';
      subDiv.innerHTML=`<h3>${sub}</h3><div class="grid"></div>`;
      const grid=subDiv.querySelector('.grid');
      grouped[cat][sub].forEach(({title,tags,summary})=>{
        const card=document.createElement('div');
        card.className='card';
        const badgeHTML=tags.map(t=>`<span class="badge">#${t}</span>`).join('');
        card.innerHTML=`<h4>${title}</h4><p>${summary.slice(0,90)}...</p>${badgeHTML}`;
        grid.appendChild(card);
      });
      section.appendChild(subDiv);
    }
    container.appendChild(section);
  }
}
buildLibrary();
</script>
</body>
</html>
