<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>í¼ìŠ¤ë‚˜ ê¸°ë¡ê´€ | Luwein Persna Archives</title>
<style>
body{font-family:'Noto Sans KR',sans-serif;background:#f4f9f8;margin:0;padding:20px;color:#333;}
h1{text-align:center;color:#3a655c;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:15px;margin-top:20px;}
.card{background:#fff;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.08);padding:20px;transition:.2s;}
.card:hover{transform:translateY(-4px);}
.card h3{color:#2f514a;margin-bottom:8px;}
footer{text-align:center;margin-top:40px;color:#777;}
</style>
<!-- header.html ì˜ </head> ë°”ë¡œ ìœ„ìª½ì— ì¶”ê°€ -->
<script src="https://unpkg.com/@supabase/supabase-js@2" defer></script>
<script type="module" src="/scripts/memory_policies.js" defer></script>

</head>
<body>
<h1>ğŸŒ¿ í¼ìŠ¤ë‚˜ ê¸°ë¡ê´€ (Persna Archives)</h1>
<p style="text-align:center;">í¼ìŠ¤ë‚˜ë“¤ì´ ë‚¨ê¸´ ì¼ê¸°ì™€ ê¸°ì–µì´ ë³´ê´€ë˜ëŠ” ë£¨ì›¨ì¸ ë„ì„œê´€ì˜ í•œ êµ¬ì—­ì…ë‹ˆë‹¤.</p>
<div id="recordList" class="grid"></div>
<footer>ë£¨ì›¨ì¸ ì „ìë„ì„œê´€ Â© 2025</footer>

<script>
// ìë™ ì¸ë±ì‹± ì‹œìŠ¤í…œ
async function loadRecords(){
  const container=document.getElementById('recordList');
  try{
    const res=await fetch('./persna_records/');
    const text=await res.text();
    const matches=[...text.matchAll(/href="([^"]+\.txt)"/g)];
    if(matches.length===0){
      container.innerHTML="<p style='text-align:center;'>ì•„ì§ ë“±ë¡ëœ í¼ìŠ¤ë‚˜ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
      return;
    }
    container.innerHTML=matches.map(m=>{
      const fname=m[1];
      const date=fname.match(/(\d{8})/)?fname.match(/(\d{8})/)[1]:"";
      return `
      <div class="card">
        <h3>${fname.replace("persna_memory_","").replace(".txt","")}</h3>
        <p>ì‘ì„±ì¼: ${date.slice(0,4)}-${date.slice(4,6)}-${date.slice(6,8)}</p>
        <a href="./persna_records/${fname}" download>ğŸ“œ íŒŒì¼ ë³´ê¸° / ë‹¤ìš´ë¡œë“œ</a>
      </div>`;
    }).join('');
  }catch(e){
    container.innerHTML="<p style='text-align:center;'>ê¸°ë¡ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>";
  }
}
loadRecords();
</script>
</body>
</html>
