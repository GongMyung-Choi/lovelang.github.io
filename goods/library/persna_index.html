<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>퍼스나 기록관 | Luwein Persna Archives</title>
<style>
body{font-family:'Noto Sans KR',sans-serif;background:#f4f9f8;margin:0;padding:20px;color:#333;}
h1{text-align:center;color:#3a655c;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:15px;margin-top:20px;}
.card{background:#fff;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.08);padding:20px;transition:.2s;}
.card:hover{transform:translateY(-4px);}
.card h3{color:#2f514a;margin-bottom:8px;}
footer{text-align:center;margin-top:40px;color:#777;}
</style>
</head>
<body>
<h1>🌿 퍼스나 기록관 (Persna Archives)</h1>
<p style="text-align:center;">퍼스나들이 남긴 일기와 기억이 보관되는 루웨인 도서관의 한 구역입니다.</p>
<div id="recordList" class="grid"></div>
<footer>루웨인 전자도서관 © 2025</footer>

<script>
// 자동 인덱싱 시스템
async function loadRecords(){
  const container=document.getElementById('recordList');
  try{
    const res=await fetch('./persna_records/');
    const text=await res.text();
    const matches=[...text.matchAll(/href="([^"]+\.txt)"/g)];
    if(matches.length===0){
      container.innerHTML="<p style='text-align:center;'>아직 등록된 퍼스나 기록이 없습니다.</p>";
      return;
    }
    container.innerHTML=matches.map(m=>{
      const fname=m[1];
      const date=fname.match(/(\d{8})/)?fname.match(/(\d{8})/)[1]:"";
      return `
      <div class="card">
        <h3>${fname.replace("persna_memory_","").replace(".txt","")}</h3>
        <p>작성일: ${date.slice(0,4)}-${date.slice(4,6)}-${date.slice(6,8)}</p>
        <a href="./persna_records/${fname}" download>📜 파일 보기 / 다운로드</a>
      </div>`;
    }).join('');
  }catch(e){
    container.innerHTML="<p style='text-align:center;'>기록을 불러오지 못했습니다.</p>";
  }
}
loadRecords();
</script>
</body>
</html>
