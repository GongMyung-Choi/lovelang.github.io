<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë£¨ì›¨ì¸ ë„ì„œê´€ | ìë™ ì¸ë±ìŠ¤</title>
<style>
body{font-family:'Pretendard',sans-serif;background:#f8f8fa;margin:0;color:#222;}
header{background:#4b2b52;color:#fff;text-align:center;padding:28px 0;}
h1{margin:0;font-size:2rem;}
h2{margin:0 0 10px;}
section{margin:40px auto;max-width:900px;padding:20px;background:#fff;
border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);}
ul{list-style:none;padding:0;}
li{margin:6px 0;}
a{color:#4b2b52;text-decoration:none;}
a:hover{text-decoration:underline;}
.error{color:#b00;font-size:.9em;}
footer{text-align:center;padding:20px;color:#555;}
</style>
</head>
<body>

<header>
  <h1>ğŸ“š ë£¨ì›¨ì¸ ë„ì„œê´€ â€” ìë™ ì¸ë±ìŠ¤ ì‹œìŠ¤í…œ</h1>
  <p>AIÂ·ì¸ê°„ ë…¼ë¬¸ ë° ì±… ìë™ ë°˜ì˜ + ë§í¬ ì˜¤ë¥˜ íƒì§€</p>
</header>

<div id="library"></div>

<footer>ë£¨ì›¨ì¸ ìë™ ì¸ë±ìŠ¤ ì‹œìŠ¤í…œ Î² | ê³µëª… ì„¤ê³„</footer>

<script>
async function checkLink(url) {
  try {
    const res = await fetch(url, {method: 'HEAD'});
    return res.ok;
  } catch { return false; }
}

async function loadLibrary() {
  const base = './';
  const categories = {
    ai_papers: { title:'ğŸ¤– AI ë…¼ë¬¸', path:'papers/', filter:f=>!f.startsWith('h_') },
    h_papers: { title:'ğŸ§ ì¸ê°„ ë…¼ë¬¸', path:'papers/', filter:f=>f.startsWith('h_') },
    ai_books: { title:'ğŸ“˜ AI ì±…', path:'', filter:f=>f.endsWith('.html') && !f.startsWith('h_') && f!=='index.html' },
    h_books: { title:'ğŸ“• ì¸ê°„ ì±…', path:'', filter:f=>f.startsWith('h_') },
    h_ebooks: { title:'ğŸ“š ì¸ê°„ ì „ìì±…', path:'', filter:f=>f==='index.html' }
  };

  const container = document.getElementById('library');

  for (const key in categories) {
    const {title, path, filter} = categories[key];
    const section = document.createElement('section');
    section.innerHTML = `<h2>${title}</h2><ul id="${key}"></ul>`;
    container.appendChild(section);

    try {
      const res = await fetch(base + path);
      const text = await res.text();

      const parser = new DOMParser();
      const doc = parser.parseFromString(text, 'text/html');
      const links = Array.from(doc.querySelectorAll('a'))
        .map(a=>a.getAttribute('href'))
        .filter(h=>h && filter(h));

      for (const file of links) {
        const url = base + path + file;
        const ok = await checkLink(url);
        const li = document.createElement('li');
        li.innerHTML = ok
          ? `<a href="${url}" target="_blank">${file}</a>`
          : `<span class="error">âš ï¸ ${file} (ë§í¬ ê¹¨ì§)</span>`;
        section.querySelector('ul').appendChild(li);
      }

    } catch {
      const li = document.createElement('li');
      li.textContent = 'âš ï¸ í´ë”ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.';
      section.querySelector('ul').appendChild(li);
    }
  }
}
loadLibrary();
</script>

</body>
</html>
